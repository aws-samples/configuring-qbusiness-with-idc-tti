{% extends "template.html" %}

{% block content %}
<h2>Amazon Q Business API Authorization Demo</h2>

{% if current_user.is_authenticated %}
<div>
    <p>Welcome back, <span>{{ current_user.name }}</span>!</p>
    <p>You have successfully authenticated with identity provider, and have been redirected back to this application.</p>
    <p>Visit the <a href="{{ url_for('profile') }}">My Profile</a> page in this application to view the information
        retrieved with your OAuth Access Token.</p>
    <p>Visit the <a href="{{ url_for('conversations') }}">My Conversations</a> page in this application to view a 
        list of active conversations retrieved using Amazon Q Business API.</p>
</div>
{% else %}


<div>
    <p>Hello!</p>
    <p>This sample uses Amazon Q Business API authorization code flow in a Flask application.</p>
    <p>When you click the login button below, you will be redirected to the login page on your Identity Provider. 
        After you authenticate, you will be returned to this application and your authorization code will be used
        to securely generate credentials to access Q Business API.
    </p>
</div>

<form method="get" action="login">
    <button id="login-button" class="btn btn-primary" type="submit">Login</button>
</form>

{% endif %}
{% endblock content %}
